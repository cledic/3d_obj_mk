#include <unistd.h>#include <stdio.h>#include <stdlib.h>#include <signal.h>#include <sys/fcntl.h>#include <sys/ioctl.h>#include <sys/mman.h>#include <sys/time.h>#include <pthread.h>#include "touchscreen.h"void *Read_XY( void *ptr);unsigned int xpos, ypos;pthread_t thread1;int iret1;/* */volatile int tsrdy=0;						int main( void){	/* */	if ( TS_Init( 2) ) {		printf("ERROR!\n");		return(1);	}	#if 1	/* Create a thread to update the X, Y value */	printf("TouchScreen thread example... Just Tap please...\n");	iret1 = pthread_create( &thread1, NULL, Read_XY, (void*)&tsrdy);	while(1) {		/* */		if ( tsrdy) {			tsrdy=0;			printf("X: %d, Y:%d\n", xpos, ypos);			if ( TS_CheckWindows( 0, 0, 320/2, 240/2, xpos, ypos))				printf("Received Tap On Upper Left!\n");			if ( TS_CheckWindows( 320/2, 240/2, 319, 239, xpos, ypos))				printf("Received Tap On Lower Right!\n");		}	}	/* */	pthread_join( thread1, NULL);#else	/* Wait forever the user tap on */	printf("TouchScreen synchronous example... Just Tap please...\n");	while(1)	{		while( TS_TouchGet( &xpos, &ypos));		printf("X: %d, Y:%d\n", xpos, ypos);	}#endif	exit(0);}/** Function thread that wait for a user Tap* Set a flag to 1. Must be a volatile type.*/void *Read_XY( void *ptr){	int *flag;		flag=(int*)ptr;		while(1)	{		while( TS_TouchGet( &xpos, &ypos));		*flag=1;		/* printf("X: %d, Y:%d\n", xpos, ypos); */	}}